"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getYNAnswer = exports.readConsole = void 0;
var tslib_1 = require("tslib");
function readConsole() {
    return tslib_1.__awaiter(this, void 0, void 0, function () {
        return tslib_1.__generator(this, function (_a) {
            return [2 /*return*/, new Promise(function (res) {
                    var stdin = process.openStdin();
                    var l = function (input) {
                        stdin.pause();
                        stdin.removeListener('data', l);
                        res(input.toString().trim());
                    };
                    stdin.addListener('data', l);
                })];
        });
    });
}
exports.readConsole = readConsole;
function getYNAnswer(defaultAnswer) {
    if (defaultAnswer === void 0) { defaultAnswer = true; }
    return tslib_1.__awaiter(this, void 0, void 0, function () {
        var answer;
        return tslib_1.__generator(this, function (_a) {
            switch (_a.label) {
                case 0: return [4 /*yield*/, readConsole()];
                case 1:
                    answer = _a.sent();
                    if (/^$/.test(answer)) {
                        return [2 /*return*/, defaultAnswer];
                    }
                    if (/^y$/i.test(answer)) {
                        return [2 /*return*/, true];
                    }
                    if (/n/i.test(answer)) {
                        return [2 /*return*/, false];
                    }
                    return [2 /*return*/, getYNAnswer()];
            }
        });
    });
}
exports.getYNAnswer = getYNAnswer;
